# LDAP Notify üîî

**LDAP Notify** ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ Email –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ LDAP-—Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π –æ —Å–æ–±—ã—Ç–∏—è—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–∞—Ä–æ–ª–µ–π.

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- –î–æ—Å—Ç—É–ø –∫ LDAP-—Å–µ—Ä–≤–µ—Ä—É 
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è SMTP-—Ä–∞—Å—Å—ã–ª–∫–∏

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/MaksimSamusik/ldap-notify.git
   cd ldap-notify
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
    ```bash
    python -m venv venv
    ```
3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
    ```bash
   .\venv\Scripts\activate
    ```
4. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt
    ```bash
   pip install -r requirements.txt
    ```
5. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ —É–∫–∞–∂–∏—Ç–µ —Ç–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∫:
    ```bash
    # –ê–¥—Ä–µ—Å LDAP-—Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–æ—Ç–æ–∫–æ–ª + —Ö–æ—Å—Ç + –ø–æ—Ä—Ç)
    LDAP_SERVER='ldap://ldap.example.com:389'
    
    # –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (DN –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
    LDAP_USER='cn=admin,dc=example,dc=com'
    
    # –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ LDAP
    LDAP_PASSWORD='s3cr3tP@ssw0rd'
    
    # –ë–∞–∑–æ–≤—ã–π DN –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    BASE_DN='ou=users,dc=example,dc=com'
    
    # –§–∏–ª—å—Ç—Ä –ø–æ–∏—Å–∫–∞ (–≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –∫–ª–∞—Å—Å–∞ inetOrgPerson)
    LDAP_FILTER='(objectClass=inetOrgPerson)'
    
    # –ê—Ç—Ä–∏–±—É—Ç —Å –¥–∞—Ç–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
    PASSWORD_EXPIRY_ATTR='pwdChangedTime'
    
    # –ê—Ç—Ä–∏–±—É—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    LAST_NOTIFY_ATTR='description'
    
    # –ó–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è
    EXPIRY_DAYS=3
   
   # SMTP-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã
    SMTP_SERVER='smtp.gmail.com'
    
    # –ü–æ—Ä—Ç SMTP (465 –¥–ª—è SSL, 587 –¥–ª—è STARTTLS)
    SMTP_PORT=465
    
    # –ü–æ—á—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (–ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å)
    SMTP_USER='notifications@example.com'
    
    # –ü–∞—Ä–æ–ª—å –æ—Ç –ø–æ—á—Ç—ã (–∏–ª–∏ app password)
    SMTP_PASS='appP@ssw0rdForSMTP'
   
    # –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
    LDAP_ORGANISATION="Acme Inc."
    
    # –î–æ–º–µ–Ω –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
    LDAP_DOMAIN="example.com"
    
    # –ü–∞—Ä–æ–ª—å admin-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è LDAP
    LDAP_ADMIN_PASSWORD="Adm1nP@ss"
    
    # –ü–æ—Ä—Ç –¥–ª—è –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ LDAP
    LDAP1_PORT="389:389"
    
    # –ü–æ—Ä—Ç –¥–ª—è LDAPS (SSL)
    LDAP2_PORT="636:636"
    
    # –ü–æ—Ä—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ phpLDAPadmin
    PHP_LDAP_ADMIN_PORT="6443:443"
6. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .dockerignore –∏ –¥–æ–±–∞–≤—å—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   ```dockerfile
    ldap_data/
    ldap_config/
   ```
7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ docker-compose.yml
    ```dockerfile
      docker-compose up
   ```
